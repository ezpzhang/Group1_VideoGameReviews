"0","#Neural Net Stuff Critic"
"0","#Getting a fresh read so we keep 0 and 1s as numerics"
"0","critic.reviewsint <- data.table::fread(""data/critic.csv"", stringsAsFactors = F)"
"0","critic.reviewsint$judgment <- c(0)"
"0","critic.reviewsint$judgment[critic.reviews$grade >= 85] <- 1"
"0","class(critic.reviewsint$judgment)"
"1","[1]"
"1"," ""numeric"""
"1","
"
"0","#format should be userID, rating, bunch of terms and freq"
"0","criticfreq <- as.matrix(criticdtm.10) #starting with smaller set, words appearing in 1% of documents"
"0","dim(criticfreq)"
"1","[1]"
"1"," 107"
"1"," 433"
"1","
"
"0","class(criticfreq[1,3])"
"1","[1]"
"1"," ""numeric"""
"1","
"
"0","which(colnames(criticfreq)==""..."") #no rows have ..."
"1","integer(0)
"
"0","#colnames(userfreq)[2] <- ""pural_ellipses"""
"0",""
"0","#also need to remove special characters like spaces from column names"
"0","names(criticfreq)<-str_replace_all(names(userfreq), c("" "" = ""."" , "","" = """" ))"
"0",""
"0","criticfreq <- cbind.data.frame(critic.reviewsint$judgment,criticfreq)#combine user info, ratings, date, etc"
"0","colnames(criticfreq)[1] <- ""judgment"""
"0",""
"0",""
"0","##DATA SPLIT"
"0","set.seed(701)  # for the purpose of reproducibility"
"0","nkcritic <- nrow(criticfreq)"
"0","validationcritic.index <- sample(nkcritic, 0.3*nkcritic)"
"0","length(validationcritic.index)   # reserve 32"
"1","[1]"
"1"," 32"
"1","
"
"0","criticreview3.val <- criticfreq[validationcritic.index,] # 32"
"0","## validation input/y - this time it is not binomial of good or bad but the actual rating"
"0","criticreview3_xval <- as.matrix(criticreview3.val[, -1])  # make sure it it is a matrix"
"0",""
"0","criticreview3_yval <- as.matrix(criticreview3.val[, 1]) # make sure it it is a matrix"
"0",""
"0","criticreview3_xtrain <- criticfreq[-validationcritic.index, -1]   #dim(data3_xtrain)"
"0","criticreview3_ytrain <- as.numeric(criticfreq[-validationcritic.index, 1])   "
"0","criticreview3_xtrain <- as.matrix(criticreview3_xtrain) # make sure it it is a matrix"
"0","criticreview3_ytrain <- as.matrix(criticreview3_ytrain) # make sure it it is a matrix"
"0",""
"0",""
"0","#KERAS Model"
"0","library(keras)"
"0","pcritic <- dim(criticreview3_xtrain)[2] # number of input variables"
"0","modelcritic <- keras_model_sequential() %>%"
"0","  layer_dense(units = 16, activation = ""relu"", input_shape = c(pcritic)) %>% "
"0","  # 1 layer with 16 neurons. default activation is relu"
"0","  layer_dense(units = 8, activation = ""relu"") %>%  # layer 2 with 8 neurons"
"0","  layer_dense(units = 2, activation = ""softmax"") # output"
"0","print(modelcritic)"
"1","Model
Model: ""sequential_2""
________________________________________________________________________________________________________________________________________________________________________________________________________
Layer (type)                                                                              Output Shape                                                                    Param #                       
========================================================================================================================================================================================================
dense_8 (Dense)                                                                           (None, 16)                                                                      6944                          
________________________________________________________________________________________________________________________________________________________________________________________________________
dense_7 (Dense)                                                                           (None, 8)                                                                       136                           
________________________________________________________________________________________________________________________________________________________________________________________________________
dense_6 (Dense)                                                                           (None, 2)                                                                       18                            
========================================================================================================================================================================================================
Total params: 7,098
Trainable params: 7,098
Non-trainable params: 0
________________________________________________________________________________________________________________________________________________________________________________________________________

"
"1",""
"1","
"
"0","##COMPILE MODEL USER"
"0","modelcritic %>% compile("
"0","  optimizer = ""rmsprop"","
"0","  loss = ""sparse_categorical_crossentropy"","
"0","  metrics = c(""accuracy"")"
"0",")"
"0",""
"0","#New way of internal validation"
"0",""
"0","fitcritic1 <- modelcritic %>% fit("
"0","  criticreview3_xtrain,"
"0","  criticreview3_ytrain,"
"0","  epochs = 40,"
"0","  batch_size = 512,"
"0","  validation_split = 0.15"
"0",")"
"1","Epoch 1/40
1/1 [==============================] - 0s 227ms/step - loss: 0.7585 - accuracy: 0.3968
"
"1","1/1 [==============================] - 0s 298ms/step - loss: 0.7585 - accuracy: 0.3968 - val_loss: 0.6137 - val_accuracy: 0.8333
"
"1","Epoch 2/40
1/1 [==============================] - 0s 2ms/step - loss: 0.6588 - accuracy: 0.6667
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.6588 - accuracy: 0.6667 - val_loss: 0.5804 - val_accuracy: 0.7500
"
"1","Epoch 3/40
1/1 [==============================] - 0s 997us/step - loss: 0.5974 - accuracy: 0.8254
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.5974 - accuracy: 0.8254 - val_loss: 0.5598 - val_accuracy: 0.7500
"
"1","Epoch 4/40
1/1 [==============================] - 0s 2ms/step - loss: 0.5553 - accuracy: 0.8413
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.5553 - accuracy: 0.8413 - val_loss: 0.5415 - val_accuracy: 0.7500
"
"1","Epoch 5/40
1/1 [==============================] - 0s 997us/step - loss: 0.5186 - accuracy: 0.8730
"
"1","1/1 [==============================] - 0s 11ms/step - loss: 0.5186 - accuracy: 0.8730 - val_loss: 0.5270 - val_accuracy: 0.8333
"
"1","Epoch 6/40
1/1 [==============================] - 0s 997us/step - loss: 0.4891 - accuracy: 0.9048
"
"1","1/1 [==============================] - 0s 11ms/step - loss: 0.4891 - accuracy: 0.9048 - val_loss: 0.5133 - val_accuracy: 0.8333
"
"1","Epoch 7/40
1/1 [==============================] - 0s 997us/step - loss: 0.4599 - accuracy: 0.9048
"
"1","1/1 [==============================] - 0s 11ms/step - loss: 0.4599 - accuracy: 0.9048 - val_loss: 0.5039 - val_accuracy: 0.8333
"
"1","Epoch 8/40
1/1 [==============================] - 0s 998us/step - loss: 0.4347 - accuracy: 0.9048
"
"1","1/1 [==============================] - 0s 11ms/step - loss: 0.4347 - accuracy: 0.9048 - val_loss: 0.4955 - val_accuracy: 0.8333
"
"1","Epoch 9/40
1/1 [==============================] - 0s 999us/step - loss: 0.4116 - accuracy: 0.9206
"
"1","1/1 [==============================] - 0s 11ms/step - loss: 0.4116 - accuracy: 0.9206 - val_loss: 0.4890 - val_accuracy: 0.8333
"
"1","Epoch 10/40
1/1 [==============================] - 0s 998us/step - loss: 0.3919 - accuracy: 0.9206
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.3919 - accuracy: 0.9206 - val_loss: 0.4831 - val_accuracy: 0.7500
"
"1","Epoch 11/40
1/1 [==============================] - 0s 0s/step - loss: 0.3739 - accuracy: 0.9206
"
"1","1/1 [==============================] - 0s 11ms/step - loss: 0.3739 - accuracy: 0.9206 - val_loss: 0.4778 - val_accuracy: 0.7500
"
"1","Epoch 12/40
1/1 [==============================] - 0s 997us/step - loss: 0.3567 - accuracy: 0.9206
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.3567 - accuracy: 0.9206 - val_loss: 0.4735 - val_accuracy: 0.7500
"
"1","Epoch 13/40
1/1 [==============================] - 0s 998us/step - loss: 0.3408 - accuracy: 0.9365
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.3408 - accuracy: 0.9365 - val_loss: 0.4699 - val_accuracy: 0.7500
"
"1","Epoch 14/40
1/1 [==============================] - 0s 998us/step - loss: 0.3264 - accuracy: 0.9365
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.3264 - accuracy: 0.9365 - val_loss: 0.4668 - val_accuracy: 0.7500
"
"1","Epoch 15/40
1/1 [==============================] - 0s 990us/step - loss: 0.3127 - accuracy: 0.9365
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.3127 - accuracy: 0.9365 - val_loss: 0.4646 - val_accuracy: 0.7500
"
"1","Epoch 16/40
1/1 [==============================] - 0s 993us/step - loss: 0.3001 - accuracy: 0.9365
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.3001 - accuracy: 0.9365 - val_loss: 0.4620 - val_accuracy: 0.7500
"
"1","Epoch 17/40
1/1 [==============================] - 0s 0s/step - loss: 0.2883 - accuracy: 0.9365
"
"1","1/1 [==============================] - 0s 11ms/step - loss: 0.2883 - accuracy: 0.9365 - val_loss: 0.4604 - val_accuracy: 0.7500
"
"1","Epoch 18/40
1/1 [==============================] - 0s 993us/step - loss: 0.2772 - accuracy: 0.9365
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.2772 - accuracy: 0.9365 - val_loss: 0.4585 - val_accuracy: 0.7500
"
"1","Epoch 19/40
1/1 [==============================] - 0s 998us/step - loss: 0.2667 - accuracy: 0.9524
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.2667 - accuracy: 0.9524 - val_loss: 0.4578 - val_accuracy: 0.7500
"
"1","Epoch 20/40
1/1 [==============================] - 0s 996us/step - loss: 0.2570 - accuracy: 0.9524
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.2570 - accuracy: 0.9524 - val_loss: 0.4566 - val_accuracy: 0.7500
"
"1","Epoch 21/40
1/1 [==============================] - 0s 992us/step - loss: 0.2473 - accuracy: 0.9524
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.2473 - accuracy: 0.9524 - val_loss: 0.4555 - val_accuracy: 0.7500
"
"1","Epoch 22/40
1/1 [==============================] - 0s 993us/step - loss: 0.2379 - accuracy: 0.9683
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.2379 - accuracy: 0.9683 - val_loss: 0.4562 - val_accuracy: 0.7500
"
"1","Epoch 23/40
1/1 [==============================] - 0s 992us/step - loss: 0.2288 - accuracy: 0.9683
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.2288 - accuracy: 0.9683 - val_loss: 0.4553 - val_accuracy: 0.7500
"
"1","Epoch 24/40
1/1 [==============================] - 0s 996us/step - loss: 0.2202 - accuracy: 0.9683
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.2202 - accuracy: 0.9683 - val_loss: 0.4564 - val_accuracy: 0.7500
"
"1","Epoch 25/40
1/1 [==============================] - 0s 994us/step - loss: 0.2124 - accuracy: 0.9683
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.2124 - accuracy: 0.9683 - val_loss: 0.4561 - val_accuracy: 0.7500
"
"1","Epoch 26/40
1/1 [==============================] - 0s 993us/step - loss: 0.2048 - accuracy: 0.9683
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.2048 - accuracy: 0.9683 - val_loss: 0.4584 - val_accuracy: 0.7500
"
"1","Epoch 27/40
1/1 [==============================] - 0s 0s/step - loss: 0.1980 - accuracy: 0.9683
"
"1","1/1 [==============================] - 0s 11ms/step - loss: 0.1980 - accuracy: 0.9683 - val_loss: 0.4574 - val_accuracy: 0.7500
"
"1","Epoch 28/40
1/1 [==============================] - 0s 997us/step - loss: 0.1912 - accuracy: 0.9683
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.1912 - accuracy: 0.9683 - val_loss: 0.4620 - val_accuracy: 0.7500
"
"1","Epoch 29/40
1/1 [==============================] - 0s 997us/step - loss: 0.1850 - accuracy: 0.9683
"
"1","1/1 [==============================] - 0s 11ms/step - loss: 0.1850 - accuracy: 0.9683 - val_loss: 0.4609 - val_accuracy: 0.7500
"
"1","Epoch 30/40
1/1 [==============================] - 0s 997us/step - loss: 0.1788 - accuracy: 0.9683
"
"1","1/1 [==============================] - 0s 11ms/step - loss: 0.1788 - accuracy: 0.9683 - val_loss: 0.4657 - val_accuracy: 0.7500
"
"1","Epoch 31/40
1/1 [==============================] - 0s 900us/step - loss: 0.1727 - accuracy: 0.9683
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.1727 - accuracy: 0.9683 - val_loss: 0.4661 - val_accuracy: 0.7500
"
"1","Epoch 32/40
1/1 [==============================] - 0s 997us/step - loss: 0.1673 - accuracy: 0.9683
"
"1","1/1 [==============================] - 0s 11ms/step - loss: 0.1673 - accuracy: 0.9683 - val_loss: 0.4696 - val_accuracy: 0.7500
"
"1","Epoch 33/40
1/1 [==============================] - 0s 998us/step - loss: 0.1618 - accuracy: 0.9683
"
"1","1/1 [==============================] - 0s 11ms/step - loss: 0.1618 - accuracy: 0.9683 - val_loss: 0.4709 - val_accuracy: 0.7500
"
"1","Epoch 34/40
1/1 [==============================] - 0s 976us/step - loss: 0.1567 - accuracy: 0.9683
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.1567 - accuracy: 0.9683 - val_loss: 0.4760 - val_accuracy: 0.7500
"
"1","Epoch 35/40
1/1 [==============================] - 0s 992us/step - loss: 0.1516 - accuracy: 0.9683
"
"1","1/1 [==============================] - 0s 13ms/step - loss: 0.1516 - accuracy: 0.9683 - val_loss: 0.4753 - val_accuracy: 0.7500
"
"1","Epoch 36/40
1/1 [==============================] - 0s 992us/step - loss: 0.1474 - accuracy: 0.9683
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.1474 - accuracy: 0.9683 - val_loss: 0.4821 - val_accuracy: 0.7500
"
"1","Epoch 37/40
1/1 [==============================] - 0s 994us/step - loss: 0.1425 - accuracy: 0.9683
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.1425 - accuracy: 0.9683 - val_loss: 0.4860 - val_accuracy: 0.7500
"
"1","Epoch 38/40
1/1 [==============================] - 0s 993us/step - loss: 0.1379 - accuracy: 0.9841
"
"1","1/1 [==============================] - 0s 12ms/step - loss: 0.1379 - accuracy: 0.9841 - val_loss: 0.4854 - val_accuracy: 0.7500
"
"1","Epoch 39/40
1/1 [==============================] - 0s 997us/step - loss: 0.1340 - accuracy: 0.9841
"
"1","1/1 [==============================] - 0s 11ms/step - loss: 0.1340 - accuracy: 0.9841 - val_loss: 0.4918 - val_accuracy: 0.7500
"
"1","Epoch 40/40
1/1 [==============================] - 0s 0s/step - loss: 0.1296 - accuracy: 0.9841
"
"1","1/1 [==============================] - 0s 11ms/step - loss: 0.1296 - accuracy: 0.9841 - val_loss: 0.4967 - val_accuracy: 0.7500
"
"0","plot(fituser1) #for validation loss, looks like 26 epochs produced good result with lowest validation loss"
